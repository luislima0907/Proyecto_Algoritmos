#:import hex kivy.utils.get_color_from_hex

<BotonOscuro@Button>:
    background_normal: ''
    background_color: hex('#393939')

<LabelOscuro@Label>:
    canvas.before:
        Color:
            rgba: hex('#393939')
        Rectangle:
            size: self.size
            pos: self.pos

<SelectableBoxLayout>:
    # Draw a background to indicate selection
    canvas.before:
        Color:
            rgba: hex('#C9F3EF') if self.selected else hex('#F0F0F0')
        Rectangle:
            pos: self.pos
            size: self.size
    Label:
        id: _Hashtag
        size_hint_x: .1
        color: (0,0,0,1)
    Label:
        id: _Articulo
        size_hint_x: .5
        color: (0,0,0,1)
    Label:
        id: _Cantidad
        size_hint_x: .1
        color: (0,0,0,1)
    Label:
        id: _Precio_por_Articulo
        size_hint_x: .15
        color: (0,0,0,1)
    Label:
        id: _Precio
        size_hint_x: .15
        color: (0,0,0,1)

<SelectableBoxLayoutPopup>:
    canvas.before:
        Color:
            rgba: hex('#7A9B87') if self.selected else hex('#393939')
        Rectangle:
            size: self.size
            pos: self.pos
    Label:
        id: _Codigo
        size_hint_x: .25
    Label:
        id: _Articulo
        size_hint_x: .5
    Label:
        id: _Cantidad
        size_hint_x: .1
    Label:
        id: _Precio
        size_hint_x: .15

<NuevaCompraPopup>:
    size_hint: .4, .4
    title: 'Cancelar Compra'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: '¿Quiere realizar una nueva compra?'
        BoxLayout:
            Button:
                id: Aceptar_Compra
                text: 'Si'
                on_release: root.nueva_compra(True)
            Button:
                text: 'No'
                on_release: root.dismiss()

<RV>:
    SelectableRecycleBoxLayout:
        default_size: None, dp(36)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'
        multiselect: False
        touch_multiselect: False

<ProductoPorNombrePopup>:
    size_hint: .5, .55
    title: 'Productos'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: .8
            orientation: 'vertical'
            BoxLayout:
                size_hint_y: .1
                Label:
                    text: 'Codigo'
                    size_hint_x: .25
                Label:
                    text: 'Nombre'
                    size_hint_x: .5
                Label:
                    text: 'Cantidad'
                    size_hint_x: .1
                Label:
                    text: 'Precio'
                    size_hint_x: .15
            RV:
                viewclass: 'SelectableBoxLayoutPopup'
                id: RVS
        BoxLayout:
            size_hint_y: .2
            Button:
                text: 'Seleccionar'
                on_release: root.seleccionar_articulo()
            Button:
                text: 'Salir'
                on_release: root.dismiss()

<CambiarCantidadPopup>:
    size_hint: .5, .5
    title: 'Cambiar Cantidad'
    auto_dismiss: False
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            Label:
                id: Informacion_Nueva_Cantidad_1
            Label:
                id: Informacion_Nueva_Cantidad_2
        Label:
            id: Notificacion_No_Valido
        TextInput:
            id: Nueva_Cantidad_Texto
            multiline: False
            hint_text: 'Nueva Cantidad'
        Button:
            id: Nueva_Cantidad_Boton
            text: 'Aceptar'
            on_release: root.validar_input(root.ids.Nueva_Cantidad_Texto.text)
        Button:
            text: 'Salir sin hacer cambios'
            on_release: root.dismiss()

<PagarPopup>:
    size_hint: .4, .5
    title: 'Pagar'
    BoxLayout:
        orientation: 'vertical'
        spacing: .5
        padding: .5
        BoxLayout:
            size_hint_y: .25
            Label:
                size_hint_x: .5
                text: 'Total a Pagar: '
            Label:
                id: Total_A_Pagar
                size_hint_x: .5
        BoxLayout:
            size_hint_y: .25
            Label:
                size_hint_x: .5
                text: 'Recibido: '
            BoxLayout:
                size_hint_x: .5
                orientation: 'vertical'
                TextInput:
                    id: Recibido
                    hint_text: 'Cantidad recibida'
                    multiline: False
                    on_text_validate: root.mostrar_cambio()
                Button:
                    text: 'Aceptar'
                    on_release: root.mostrar_cambio()
        BoxLayout:
            size_hint_y: .25
            Label:
                size_hint_x: .5
                text: 'Tu cambio es: '
            Label:
                id: Cambio
                size_hint_x: .5
        BoxLayout:
            size_hint_y: .25
            Button:
                id: Boton_Pagar
                disabled: True
                text: 'Terminar Pago'
                on_release: root.pagado()
            Button:
                text: 'Cancelar'
                on_release: root.dismiss()



<VentasWindow>:
    canvas.before:
        Color:
            rgba: hex('#24B0AE')
        Rectangle:
            size: self.size
            pos: self.pos
    orientation: 'vertical'
    BoxLayout:
        size_hint_y: .1
        spacing: .5
        Label:
            id: Bienvenido_label
            size_hint_x: .25
            text: 'Bienvenido: '
            color: hex('#000000')
        GridLayout:
            size_hint_x: .25
            rows: 2
            cols: 2
            Label:
                text: 'Fecha: '
                color: hex('#000000')
            Label:
                id: Fecha
                color: hex('#000000')
            Label:
                text: 'Hora: '
                color: hex('#000000')
            Label:
                id: Hora
                color: hex('#000000')
        Label:
            size_hint_x: .2
        BotonOscuro:
            id: Cliente_Boton
            size_hint_x: .15
            text: 'Clientes'
            on_release: root.admin()
        BotonOscuro:
            id: Salir_Boton
            size_hint_x: .15
            text: 'Salir'
            on_release: root.signout()
    BoxLayout:
        canvas.before:
            Color:
                rgba: hex('#FFFFFF')
            Rectangle:
                size: self.size
                pos: self.pos
        size_hint_y: .87
        spacing: .5
        BoxLayout:
            size_hint_x: .7
            orientation: 'vertical'
            spacing: .5
            GridLayout:
                spacing: .5
                size_hint_y: .1
                rows: 2
                cols: 2
                LabelOscuro:
                    text: 'Buscar por Código'
                LabelOscuro:
                    text: 'Buscar por Nombre'
                TextInput:
                    id: Buscar_Codigo
                    multiline: False
                    on_text_validate: root.agregar_producto_codigo(self.text)
                TextInput:
                    id: Buscar_Nombre
                    multiline: False
                    on_text_validate: root.agregar_producto_nombre(self.text)
            BoxLayout:
                size_hint_y: .8
                orientation: 'vertical'
                BoxLayout:
                    size_hint_y: .05
                    spacing: .5
                    LabelOscuro:
                        text: '#'
                        size_hint_x: .1
                    LabelOscuro:
                        text: 'Artículo'
                        size_hint_x: .5
                    LabelOscuro:
                        text: 'Cantidad'
                        size_hint_x: .1
                    LabelOscuro:
                        text: 'Precio por Artículo'
                        size_hint_x: .15
                    LabelOscuro:
                        text: 'Total'
                        size_hint_x: .15
                RV:
                    viewclass: 'SelectableBoxLayout'
                    id: RVS
            BoxLayout:
                size_hint_y: .1
                spacing: .5
                BotonOscuro:
                    text: 'Borrar Artículo'
                    on_release: root.eliminar_producto()
                BotonOscuro:
                    text: 'Cambiar Cantidad'
                    on_release: root.modificar_producto()

        BoxLayout:
            size_hint_x: .3
            orientation: 'vertical'
            canvas.before:
                Color:
                    rgba: hex('#BCD3D2')
                Rectangle:
                    size: self.size
                    pos: self.pos
            GridLayout:
                canvas.before:
                    Color:
                        rgba: hex('#000000')
                    Rectangle:
                        size: self.size
                        pos: self.pos
                size_hint_y: .4
                rows: 2
                cols: 2
                Label:
                    text: 'Sub-Total'
                Label:
                    id: Sub_Total
                    text: '0.00'
                Label:
                    text: 'Total'
                Label:
                    id: Total
                    text: '0.00'
            BoxLayout:
                size_hint_y: .6
                orientation: 'vertical'
                spacing: .5
                Label:
                    id: Notificacion_Falla
                    size_hint_y: .25
                    color: hex('#9B0303')
                Label:
                    id: Notificacion_Exito
                    size_hint_y: .25
                    color: hex('#039B1E')
                BotonOscuro:
                    size_hint_y: .25
                    id: pagar
                    text: 'Pagar'
                    on_release: root.pagar()
                BotonOscuro:
                    size_hint_y: .25
                    id: Nueva_Compra
                    text: 'Nueva compra'
                    on_release: root.nueva_compra()
    BoxLayout:
        size_hint_y: .03

